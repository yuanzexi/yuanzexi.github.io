#Linux 命令行

----

## shell 是什么
1. 命令行实际上指的是 shell。
2. shell 是一个接收由键盘输入的命令，并将其传递给操作系统来执行的程序。
3. shell 来源于 GNU 的 bash 项目，bash 是 Bourne Again Shell 的首字母缩写，sh 是由 Steve Bourne 编写的最初的 UNIX shell 程序，即 bash 是 sh 的增强版本。
4. Linux 的图形用户界面中，由终端仿真器（teminal emulator）程序负责与 shell 进行交互。在 KDE 环境下是 konsole，在 GNOME 环境下是 gnome-terminal。

## shell 的简单使用

```
[me@linuxbox ~]$
```

1. 上述为 shell 提示符，只要 shell 准备接受外部输入，它就会出现。它通常包括：`username@machinename`，其后是当前工作目录和一个 `$` 符号。
2. 若 shell 提示符最后一个字符是 `#` 而非 `$`，则终端会话享有超级用户特权。这意味着我们要么是以 root 用户身份登录，要么我们所使用的终端仿真器可提供超级用户（管理）特权。
3. 命令历史记录
    - 向上方向键：可向前翻阅先前的命令，即命令历史记录。
    - 向下方向键：可向后翻阅命令历史记录，直至最新的无命令输入状态。
4. 请勿使用 `Ctrl-C` 和 `Ctrl-V` 来进行命令的复制粘贴操作。可用鼠标左键点击拖动选中文本来复制，并在目标光标位置使用鼠标中键来进行粘贴操作。
5. shell 的一些简单命令
    - `date`：显示当前系统的时间和日期。
    - `cal`：显示当月的日历。
    - `df`：查看磁盘驱动器当前的可用空间。
    - `free`：显示可用内存。
    - `exit`：结束终端会话。
    
## 导航
1. `pwd`：当前工作目录。
2. `ls`：列出目录内容。
    - 可列出多个指定目录，以空格隔开，如`ls ~ /usr`
    - 可用选项
    |option|含义|
    |----|----|
    |-a, --all|列出所有文件，包括隐藏文件|
    |-d, --directory|查看你指定目录本身的详细信息，而非该目录下的内容|
    |-F, --classify|显示类型指示符|
    |-h, --human-readable|以 human-readable 方式显示文件大小，而非字节数|
    |-l|使用长格式显示结果，即文件详细信息|
    |-r, --reverse|按字母降序显示|
    |-S|按文件大小排序显示|
    |-t|按修改时间排序显示|
    - 长格式显示列信息：`ls -l`
    |文件访问权限|Hard Link 数|文件所有者用户|文件所属组|文件大小|上次修改时间|文件名|
    |--|--|

3. `cd`：改变工作目录。
    - `cd `：将工作目录改成主目录
    - `cd -`：将工作目录改变成先前的工作目录
    - `cd ~username`：将工作目录变成 username 的主目录
4. `file`：查看文件类型
5. `less`：查看文本文件内容
    - less  使用命令
    
    |命令|功能|
    |--|--|
    |PAGE UP 或 b|下一页|
    |PAGE DOWN 或 Spacebar|上一页|
    |向上箭头键|上一行|
    |向下箭头键|下一行|
    |G | 跳到文件末尾|
    |1G 或 g|跳到文件开头|
    |/character|向前查找指定字符串|
    |n|重复上一次查找操作|
    |h|显示帮助|
    |q|退出less|

## 文件操作
1. 文件名通配符
    - 通配符

    |通配符|匹配项|
    |--|--|
    |*|匹配任意多个字符|
    |?|匹配任一单个字符|
    |[characters]|匹配任意一个属于字符集中的字符|
    |[!characters]|匹配任意一个不属于字符集中的字符|
    |[[:class:]]|匹配任意一个属于指定字符类中的字符|
    
    - 常用字符类
        
    |字符类|匹配项|
    |--|--|
    |[:alnum:]|匹配任意一个字母或数字|
    |[:alpha:]|匹配任意一个字母|
    |[:digit:]|匹配任意一个数字|
    |[:lower:]|匹配任意一个小写字母|
    |[:upper:]|匹配任意一个大写字母|
    

2. `mkdir`：创建目录
    - 可同时创建多个目录，以空格隔开
3. `cp`：复制文件和目录
    - 使用方式：
        - `cp item1 item2`：将单个项目复制到单个项目
        - `cp item... directory`：将多个项目复制进一个目录中
    - 可选项
    
    |option|含义|
    |--|--|
    |-a, --archive|复制文件和目录及其属性，包括所有权和权限|
    |-i, --interactive|在覆盖一个已存在的文件前，提示用户进行确认；否则，直接默认覆盖|
    |-r, --recursive|递归地复制目录及其内容，复制目录时需要该选项或者 `-a` 选项。|
    |-u, --update|只复制目标目录中不存在的文件，或者是目标目录中相应文件的更新文件|
    |-v, --verbose|复制文件时，显示信息性消息|

4. `mv`：移除和重命名文件
    - 使用方式
        - `mv item1 item2`：将 item1 移动到 item2。
        - `mv item... directory`：将多个 item 移动到 directory 下。
    - 可选项
    
    |option|含义|
    |--|--|
    |-i, --interactive|覆盖一个已存在的文件时，提示用户确认；否则，默认覆盖|
    |-u, --update|只移动目标目录中不存在的，或是相应文件的更新文件。
    |-v, --verbose|移动文件时，显示信息性消息|
5. `rm`：删除文件和目录
    - 使用方式：`rm item...`，可删除多个项目
    - 可选项
    
    |option|含义|
    |--|--|
    |-i, --interactive|删除一个已存在文件时，提示用户确认；否则，默认删除|
    |-r, --recursive|递归地删除目录|
    |-f, --force|忽略不存在的文件，并无需提示确认。该选项会覆盖 -i 选项|
    |-v, --verbose|删除文件时，显示信息性消息|
    - 注意事项：
        - 与通配符使用时，需谨慎，以防出现：`rm * .html`这样会删除所有文件的错误。
        - 小技巧：可先用 `ls` 命令对通配符操作做出测试，然后用 `rm` 替换上一条历史命令中的 `ls`。
6. `ln`：创建链接
    - 使用方式
        - `ln file link`：创建 hard link。
        - `ln -s item link`：创建 symbol link，此处 item 可为文件或目录。

## 命令的使用

1. 命令的类别
    - 可执行程序
    - shell 内置命令
    - shell 函数
    - alias 命令
2. 与命令相关的指令
    - `type`：显式命令的类型
    - `which`：显式可执行程序的位置，不适用于内置命令和命令别名。
    - `help`：获得 shell 内置命令的帮助文档。 使用方法：`help cd`。
    - `--help`：显式命令的使用信息。
    - `man`：显式程序的手册页，其调用 `less` 命令来显示文档。使用方法：`man program`。
        - 手册文档组织结构。手册文档一般被分为多个部分（section），指定 section 进行查找：`man section search_term`。

        |部分|内容|
        |--|--|
        |1|用户命令|
        |2|内核系统调用的程序接口|
        |3|C 库函数程序接口|
        |4|特殊文件，如设备节点和驱动程序|
        |5|文件格式|
        |6|游戏和娱乐，例如屏幕保护程序|
        |7|其他杂项|
        |8|系统管理命令|
    - `apropos`：显示合适的命令，即模糊搜索命令。使用方法：`apropos floppy`。
    - `whatis`：显示命令的简要描述。
    - `info`：显示程序的 info 条目。 info 界面使用 info 阅读器来显示，还可使用超链接跳转。
        - info 命令

        |命令|功能|
        |--|--|
        |?|显示命令帮助|
        |PAGE UP or BACKSPACE|上一页|
        |PAGE DOWN or Spacebar|下一页|
        |n|显示下一个节点 Next|
        |p|显示上一个节点 Prev|
        |u|显示目前显示节点的父节点 Up|
        |ENTER|进入光标所指的超链接|
        |q|退出|
    - 可阅读 README 文档来了解软件
        - `zless`：可以显示由 gzip 压缩的文本文件内容。
3. 使用别名创建自己的命令
    - 使用分号间隔命令，即可同时在一行输入多个命令按顺序执行。如 `command1; command2; command3;`。
    - 设置别名（临时，shell 会话结束时失效）：`alias name='string'`，如 `alias foo='cd /usr/bin;'`。
    - 删除别名（临时，shell 会话结束时失效）：`unalias name`。
    - 查看环境中定义的所有别名：`alias`。
